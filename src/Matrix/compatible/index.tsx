import { Box, Button, SvgIcon, SxProps, TextField } from "@mui/material";

import InputMask from "react-input-mask";

import { FC, FormEventHandler, useState } from "react";
import { useGlobalState } from "../../provider";
import { Theme } from "@emotion/react";
import { matchaColor } from "../personal/styles";
import theme from "../../theme";

interface HeartProps {
  sx: SxProps<Theme>;
}

const Heart: FC<HeartProps> = (props) => (
  <SvgIcon sx={props.sx}>
    <svg
      width="127"
      height="128"
      viewBox="0 0 127 128"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M47.4388 43.0588C41.8598 43.5793 36.9031 47.2365 34.7751 52.4023C32.6184 57.6376 33.5109 63.6499 37.0859 67.9695C37.3484 68.2867 43.1714 74.141 50.026 80.979L58.711 89.6432C60.8374 91.7644 64.2106 91.8518 66.4259 89.8236C73.785 83.0862 88.7945 69.2882 89.1898 68.8823C93.6371 64.3156 94.7545 57.399 91.974 51.6482C91.1461 49.936 90.1784 48.5993 88.813 47.2819C84.6943 43.3082 78.7695 41.9736 73.3051 43.7888C68.9287 45.2425 65.3205 48.7793 63.777 53.1282C63.6997 53.346 63.3921 53.3473 63.3129 53.1302L63.2821 53.0458C62.1448 49.9263 60.0508 47.3 57.2193 45.4421C54.4153 43.602 50.8718 42.7386 47.4388 43.0588Z"
        fill={matchaColor}
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M47.4388 43.0588C41.8598 43.5793 36.9031 47.2365 34.7751 52.4023C32.6184 57.6376 33.5109 63.6499 37.0859 67.9695C37.3484 68.2867 43.1714 74.141 50.026 80.979L58.711 89.6432C60.8374 91.7644 64.2106 91.8518 66.4259 89.8236C73.785 83.0862 88.7945 69.2882 89.1898 68.8823C93.6371 64.3156 94.7545 57.399 91.974 51.6482C91.1461 49.936 90.1784 48.5993 88.813 47.2819C84.6943 43.3082 78.7695 41.9736 73.3051 43.7888C68.9287 45.2425 65.3205 48.7793 63.777 53.1282C63.6997 53.346 63.3921 53.3473 63.3129 53.1302L63.2821 53.0458C62.1448 49.9263 60.0508 47.3 57.2193 45.4421C54.4153 43.602 50.8718 42.7386 47.4388 43.0588Z"
        fill="url(#paint0_linear_307_927)"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M47.4388 43.0588C41.8598 43.5793 36.9031 47.2365 34.7751 52.4023C32.6184 57.6376 33.5109 63.6499 37.0859 67.9695C37.3484 68.2867 43.1714 74.141 50.026 80.979L58.711 89.6432C60.8374 91.7644 64.2106 91.8518 66.4259 89.8236C73.785 83.0862 88.7945 69.2882 89.1898 68.8823C93.6371 64.3156 94.7545 57.399 91.974 51.6482C91.1461 49.936 90.1784 48.5993 88.813 47.2819C84.6943 43.3082 78.7695 41.9736 73.3051 43.7888C68.9287 45.2425 65.3205 48.7793 63.777 53.1282C63.6997 53.346 63.3921 53.3473 63.3129 53.1302L63.2821 53.0458C62.1448 49.9263 60.0508 47.3 57.2193 45.4421C54.4153 43.602 50.8718 42.7386 47.4388 43.0588Z"
        fill="url(#paint1_linear_307_927)"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M47.4388 43.0588C41.8598 43.5793 36.9031 47.2365 34.7751 52.4023C32.6184 57.6376 33.5109 63.6499 37.0859 67.9695C37.3484 68.2867 43.1714 74.141 50.026 80.979L58.711 89.6432C60.8374 91.7644 64.2106 91.8518 66.4259 89.8236C73.785 83.0862 88.7945 69.2882 89.1898 68.8823C93.6371 64.3156 94.7545 57.399 91.974 51.6482C91.1461 49.936 90.1784 48.5993 88.813 47.2819C84.6943 43.3082 78.7695 41.9736 73.3051 43.7888C68.9287 45.2425 65.3205 48.7793 63.777 53.1282C63.6997 53.346 63.3921 53.3473 63.3129 53.1302L63.2821 53.0458C62.1448 49.9263 60.0508 47.3 57.2193 45.4421C54.4153 43.602 50.8718 42.7386 47.4388 43.0588Z"
        fill="url(#paint2_linear_307_927)"
      />
      <path
        d="M116.493 55.3545C121.326 54.5732 125.942 57.866 126.039 62.7598C126.257 73.8601 123.539 84.8782 118.086 94.6689C111.187 107.054 100.314 116.751 87.2243 122.195C74.1342 127.638 59.5912 128.509 45.9451 124.667C32.2989 120.825 20.3466 112.494 12.0192 101.021C3.69177 89.548 -0.524302 75.6024 0.0521188 61.4374C0.62854 47.2724 5.96379 33.7155 15.1959 22.9569C24.428 12.1983 37.0176 4.86646 50.9309 2.14596C61.9296 -0.00466472 73.2476 0.82578 83.7336 4.47369C88.3567 6.08198 90.0565 11.492 87.8161 15.844C85.5757 20.196 80.2384 21.813 75.5339 20.4615C68.6791 18.4922 61.4137 18.1576 54.3324 19.5423C44.3323 21.4976 35.2834 26.7674 28.6478 34.5002C22.0122 42.2329 18.1775 51.977 17.7632 62.1581C17.3489 72.3392 20.3792 82.3627 26.3645 90.609C32.3499 98.8554 40.9407 104.843 50.7489 107.604C60.5571 110.366 71.0099 109.74 80.4184 105.828C89.8269 101.915 97.6416 94.9451 102.6 86.0434C106.111 79.7399 108.045 72.7285 108.297 65.6009C108.47 60.7092 111.661 56.1358 116.493 55.3545Z"
        fill={matchaColor}
      />
      <path
        d="M116.493 55.3545C121.326 54.5732 125.942 57.866 126.039 62.7598C126.257 73.8601 123.539 84.8782 118.086 94.6689C111.187 107.054 100.314 116.751 87.2243 122.195C74.1342 127.638 59.5912 128.509 45.9451 124.667C32.2989 120.825 20.3466 112.494 12.0192 101.021C3.69177 89.548 -0.524302 75.6024 0.0521188 61.4374C0.62854 47.2724 5.96379 33.7155 15.1959 22.9569C24.428 12.1983 37.0176 4.86646 50.9309 2.14596C61.9296 -0.00466472 73.2476 0.82578 83.7336 4.47369C88.3567 6.08198 90.0565 11.492 87.8161 15.844C85.5757 20.196 80.2384 21.813 75.5339 20.4615C68.6791 18.4922 61.4137 18.1576 54.3324 19.5423C44.3323 21.4976 35.2834 26.7674 28.6478 34.5002C22.0122 42.2329 18.1775 51.977 17.7632 62.1581C17.3489 72.3392 20.3792 82.3627 26.3645 90.609C32.3499 98.8554 40.9407 104.843 50.7489 107.604C60.5571 110.366 71.0099 109.74 80.4184 105.828C89.8269 101.915 97.6416 94.9451 102.6 86.0434C106.111 79.7399 108.045 72.7285 108.297 65.6009C108.47 60.7092 111.661 56.1358 116.493 55.3545Z"
        fill="url(#paint3_linear_307_927)"
      />
      <path
        d="M116.493 55.3545C121.326 54.5732 125.942 57.866 126.039 62.7598C126.257 73.8601 123.539 84.8782 118.086 94.6689C111.187 107.054 100.314 116.751 87.2243 122.195C74.1342 127.638 59.5912 128.509 45.9451 124.667C32.2989 120.825 20.3466 112.494 12.0192 101.021C3.69177 89.548 -0.524302 75.6024 0.0521188 61.4374C0.62854 47.2724 5.96379 33.7155 15.1959 22.9569C24.428 12.1983 37.0176 4.86646 50.9309 2.14596C61.9296 -0.00466472 73.2476 0.82578 83.7336 4.47369C88.3567 6.08198 90.0565 11.492 87.8161 15.844C85.5757 20.196 80.2384 21.813 75.5339 20.4615C68.6791 18.4922 61.4137 18.1576 54.3324 19.5423C44.3323 21.4976 35.2834 26.7674 28.6478 34.5002C22.0122 42.2329 18.1775 51.977 17.7632 62.1581C17.3489 72.3392 20.3792 82.3627 26.3645 90.609C32.3499 98.8554 40.9407 104.843 50.7489 107.604C60.5571 110.366 71.0099 109.74 80.4184 105.828C89.8269 101.915 97.6416 94.9451 102.6 86.0434C106.111 79.7399 108.045 72.7285 108.297 65.6009C108.47 60.7092 111.661 56.1358 116.493 55.3545Z"
        fill="url(#paint4_linear_307_927)"
      />
      <path
        d="M116.493 55.3545C121.326 54.5732 125.942 57.866 126.039 62.7598C126.257 73.8601 123.539 84.8782 118.086 94.6689C111.187 107.054 100.314 116.751 87.2243 122.195C74.1342 127.638 59.5912 128.509 45.9451 124.667C32.2989 120.825 20.3466 112.494 12.0192 101.021C3.69177 89.548 -0.524302 75.6024 0.0521188 61.4374C0.62854 47.2724 5.96379 33.7155 15.1959 22.9569C24.428 12.1983 37.0176 4.86646 50.9309 2.14596C61.9296 -0.00466472 73.2476 0.82578 83.7336 4.47369C88.3567 6.08198 90.0565 11.492 87.8161 15.844C85.5757 20.196 80.2384 21.813 75.5339 20.4615C68.6791 18.4922 61.4137 18.1576 54.3324 19.5423C44.3323 21.4976 35.2834 26.7674 28.6478 34.5002C22.0122 42.2329 18.1775 51.977 17.7632 62.1581C17.3489 72.3392 20.3792 82.3627 26.3645 90.609C32.3499 98.8554 40.9407 104.843 50.7489 107.604C60.5571 110.366 71.0099 109.74 80.4184 105.828C89.8269 101.915 97.6416 94.9451 102.6 86.0434C106.111 79.7399 108.045 72.7285 108.297 65.6009C108.47 60.7092 111.661 56.1358 116.493 55.3545Z"
        fill="url(#paint5_linear_307_927)"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M101.311 25.024C99.1674 25.2098 97.2634 26.5154 96.4459 28.3596C95.6175 30.2286 95.9603 32.375 97.3336 33.9171C97.4344 34.0303 99.6713 36.1203 102.304 38.5615L103.455 39.6278C105.541 41.5619 108.706 41.6343 110.87 39.7882C113.749 37.333 117.231 34.3551 117.349 34.243C119.057 32.6126 119.486 30.1434 118.418 28.0904C118.1 27.4791 117.729 27.002 117.204 26.5317C115.622 25.113 113.346 24.6366 111.247 25.2846C109.566 25.8036 108.18 27.0662 107.587 28.6188C107.556 28.7003 107.44 28.7008 107.408 28.6196L107.397 28.5893C106.96 27.4757 106.155 26.5381 105.068 25.8748C103.991 25.2179 102.629 24.9097 101.311 25.024Z"
        fill={matchaColor}
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M101.311 25.024C99.1674 25.2098 97.2634 26.5154 96.4459 28.3596C95.6175 30.2286 95.9603 32.375 97.3336 33.9171C97.4344 34.0303 99.6713 36.1203 102.304 38.5615L103.455 39.6278C105.541 41.5619 108.706 41.6343 110.87 39.7882C113.749 37.333 117.231 34.3551 117.349 34.243C119.057 32.6126 119.486 30.1434 118.418 28.0904C118.1 27.4791 117.729 27.002 117.204 26.5317C115.622 25.113 113.346 24.6366 111.247 25.2846C109.566 25.8036 108.18 27.0662 107.587 28.6188C107.556 28.7003 107.44 28.7008 107.408 28.6196L107.397 28.5893C106.96 27.4757 106.155 26.5381 105.068 25.8748C103.991 25.2179 102.629 24.9097 101.311 25.024Z"
        fill="url(#paint6_linear_307_927)"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M101.311 25.024C99.1674 25.2098 97.2634 26.5154 96.4459 28.3596C95.6175 30.2286 95.9603 32.375 97.3336 33.9171C97.4344 34.0303 99.6713 36.1203 102.304 38.5615L103.455 39.6278C105.541 41.5619 108.706 41.6343 110.87 39.7882C113.749 37.333 117.231 34.3551 117.349 34.243C119.057 32.6126 119.486 30.1434 118.418 28.0904C118.1 27.4791 117.729 27.002 117.204 26.5317C115.622 25.113 113.346 24.6366 111.247 25.2846C109.566 25.8036 108.18 27.0662 107.587 28.6188C107.556 28.7003 107.44 28.7008 107.408 28.6196L107.397 28.5893C106.96 27.4757 106.155 26.5381 105.068 25.8748C103.991 25.2179 102.629 24.9097 101.311 25.024Z"
        fill="url(#paint7_linear_307_927)"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M101.311 25.024C99.1674 25.2098 97.2634 26.5154 96.4459 28.3596C95.6175 30.2286 95.9603 32.375 97.3336 33.9171C97.4344 34.0303 99.6713 36.1203 102.304 38.5615L103.455 39.6278C105.541 41.5619 108.706 41.6343 110.87 39.7882C113.749 37.333 117.231 34.3551 117.349 34.243C119.057 32.6126 119.486 30.1434 118.418 28.0904C118.1 27.4791 117.729 27.002 117.204 26.5317C115.622 25.113 113.346 24.6366 111.247 25.2846C109.566 25.8036 108.18 27.0662 107.587 28.6188C107.556 28.7003 107.44 28.7008 107.408 28.6196L107.397 28.5893C106.96 27.4757 106.155 26.5381 105.068 25.8748C103.991 25.2179 102.629 24.9097 101.311 25.024Z"
        fill="url(#paint8_linear_307_927)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_307_927"
          x1="33.6143"
          y1="59.0551"
          x2="84.8577"
          y2="90.9907"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#c3d4a5" />
          <stop offset="1" stopColor="#c3d4a5" stop-opacity="0" />
        </linearGradient>
        <linearGradient
          id="paint1_linear_307_927"
          x1="40.3238"
          y1="90.1941"
          x2="53.2022"
          y2="57.549"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#cdd0c0" />
          <stop offset="1" stopColor="#cdd0c0" stop-opacity="0" />
        </linearGradient>
        <linearGradient
          id="paint2_linear_307_927"
          x1="127.261"
          y1="90.1696"
          x2="66.01"
          y2="35.0674"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#6e8641" />
          <stop offset="1" stop-color="#6e8641" stop-opacity="0" />
        </linearGradient>
        <linearGradient
          id="paint3_linear_307_927"
          x1="-6.96552e-07"
          y1="41.1335"
          x2="117.436"
          y2="102.765"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#c3d4a5" />
          <stop offset="1" stop-color="#c3d4a5" stop-opacity="0" />
        </linearGradient>
        <linearGradient
          id="paint4_linear_307_927"
          x1="14.1253"
          y1="118.981"
          x2="50.357"
          y2="41.6402"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#cdd0c0" />
          <stop offset="1" stop-color="#cdd0c0" stop-opacity="0" />
        </linearGradient>
        <linearGradient
          id="paint5_linear_307_927"
          x1="197.152"
          y1="118.92"
          x2="48.916"
          y2="6.62149"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#6e8641" />
          <stop offset="1" stop-color="#6e8641" stop-opacity="0" />
        </linearGradient>
        <linearGradient
          id="paint6_linear_307_927"
          x1="96"
          y1="30.7347"
          x2="114.852"
          y2="43.3769"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#c3d4a5" />
          <stop offset="1" stop-color="#c3d4a5" stop-opacity="0" />
        </linearGradient>
        <linearGradient
          id="paint7_linear_307_927"
          x1="98.5774"
          y1="41.8513"
          x2="102.93"
          y2="29.9791"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#cdd0c0" />
          <stop offset="1" stop-color="#cdd0c0" stop-opacity="0" />
        </linearGradient>
        <linearGradient
          id="paint8_linear_307_927"
          x1="131.974"
          y1="41.8425"
          x2="109.996"
          y2="20.5683"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#6e8641" />
          <stop offset="1" stop-color="#6e8641" stop-opacity="0" />
        </linearGradient>
      </defs>
    </svg>
  </SvgIcon>
);

const CompatibleMatrix = () => {
  const state = useGlobalState();

  const [personal, setPersonal] = useState<{
    personalName: string;
    personalDate: string;
  }>({ personalName: "", personalDate: "" });

  const [partner, setPartner] = useState<{
    partnerName: string;
    partnerDate: string;
  }>({
    partnerName: "",
    partnerDate: "",
  });

  const handleSubmit: FormEventHandler<HTMLFormElement> = (event) => {
    event.preventDefault();

    state.setData({
      ...state,
      partnerDate: partner.partnerDate,
      partnerName: partner.partnerName,
      personalName: personal.personalName,
      personalDate: personal.personalDate,
    });
  };

  return (
    <Box
      sx={{
        display: "flex",
        flexDirection: "column",
        alignItems: "center",
        gap: "20px",
      }}
    >
      <Heart sx={{ width: " 80px", height: "80px" }} />
      <Box
        sx={{
          display: "flex",
          flexDirection: "column",
          alignItems: "center",
          gap: "20px",
        }}
        onSubmit={handleSubmit}
        component="form"
      >
        <Box
          sx={{
            display: "flex",
            gap: "20px",
            [theme.breakpoints.down("sm")]: {
              flexDirection: "column",
            },
          }}
        >
          <Box sx={{ display: "flex", flexDirection: "column" }}>
            <TextField
              label="Nome"
              placeholder="Inserisci il tuo nome"
              value={personal.personalName}
              required
              onChange={(event) =>
                setPersonal({ ...personal, personalName: event.target.value })
              }
              autoComplete="name"
            />
            <InputMask
              mask="99/99/9999"
              placeholder="Inserisci la tua data di nascita"
              value={personal.personalDate}
              onChange={(event) =>
                setPersonal({ ...personal, personalDate: event.target.value })
              }
              required
              autoComplete="bday"
            >
              <TextField label={"data di nascita"} sx={{ minWidth: "169px" }} />
            </InputMask>
          </Box>
          <Box sx={{ display: "flex", flexDirection: "column" }}>
            <TextField
              label="Nome"
              placeholder="Inserisci il tuo nome"
              value={partner.partnerName}
              required
              onChange={(event) =>
                setPartner({ ...partner, partnerName: event.target.value })
              }
              autoComplete="name"
            />
            <InputMask
              mask="99/99/9999"
              placeholder="Inserisci la tua data di nascita"
              value={partner.partnerDate}
              required
              onChange={(event) =>
                setPartner({ ...partner, partnerDate: event.target.value })
              }
              autoComplete="bday"
            >
              <TextField label={"data di nascita"} sx={{ minWidth: "169px" }} />
            </InputMask>
          </Box>
        </Box>
        <Button type="submit" variant="gradient">
          CALCOLARE
        </Button>
      </Box>
    </Box>
  );
};

export default CompatibleMatrix;
